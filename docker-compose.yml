# Move a folder up with, /dashboard, /api, and /nging_conf in the folder
version: "3.7"
services:
  foundry_dashboard:
    image: kenishi86/foundry-dashboard:latest
    container_name: foundry-dashboard
    restart: "unless-stopped"

    volumes: 
      - "./nginx_conf/nginx.conf:/etc/nginx/nginx.conf:ro"
      - "./nginx_conf/.htpasswd:/etc/nginx/.htpasswd:ro"
    ports:
      - "33000:80"
    
  foundry_dashboard_api:
    image: kenishi86/foundry-dashboard-api:latest
    container_name: foundry-dashboard-api
    init: true
    restart: "unless-stopped"

    volumes: 
      - "/var/run/docker.sock:/var/run/docker.sock"
      - "$FOUNDRY_COMPOSE_FILE_PATH:/docker_compose.yml"

    environment:
      - LISTEN_PORT=45321
      - FOUNDRY_COMPOSE_FILE_PATH=/docker_compose.yml
      - FOUNDRY_CONTAINER_NAME=$FOUNDRY_CONTAINER_NAME
      - CORS_HOSTNAME=$CORS_HOSTNAME
    
    ports:
     - "127.0.0.1:45321:45321"
